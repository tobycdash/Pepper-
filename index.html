
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Pepper, You Stink!</title>
    <style>
        body {
            margin: 0;
            background: #88ccff;
            font-family: monospace;
            overflow: hidden;
        }
        canvas {
            display: block;
            background: #aad;
        }
        .controls {
            position: fixed;
            bottom: 10px;
            width: 100%;
            text-align: center;
        }
        .btn {
            display: inline-block;
            margin: 0 10px;
            padding: 15px;
            font-size: 20px;
            background: #444;
            color: white;
            border-radius: 10px;
            user-select: none;
        }
    </style>
</head>
<body>
    <canvas id="gameCanvas" width="800" height="450"></canvas>
    <div class="controls">
        <div class="btn" ontouchstart="keys.left=true" ontouchend="keys.left=false">⬅️</div>
        <div class="btn" ontouchstart="keys.right=true" ontouchend="keys.right=false">➡️</div>
        <div class="btn" ontouchstart="keys.jump=true" ontouchend="keys.jump=false">⬆️</div>
    </div>
    <script>
        const canvas = document.getElementById("gameCanvas");
        const ctx = canvas.getContext("2d");

        let keys = { left: false, right: false, jump: false };
        let player = { x: 100, y: 350, w: 50, h: 50, vy: 0, grounded: true };
        let dog = { x: 400, y: 350, w: 50, h: 50, fartTimer: 0 };
        let farts = [];
        let gravity = 1;
        let gameOver = false;
        let score = 0;

        document.addEventListener("keydown", (e) => {
            if (e.key === "ArrowLeft") keys.left = true;
            if (e.key === "ArrowRight") keys.right = true;
            if (e.key === "ArrowUp") keys.jump = true;
        });
        document.addEventListener("keyup", (e) => {
            if (e.key === "ArrowLeft") keys.left = false;
            if (e.key === "ArrowRight") keys.right = false;
            if (e.key === "ArrowUp") keys.jump = false;
        });

        function drawRect(obj, color) {
            ctx.fillStyle = color;
            ctx.fillRect(obj.x, obj.y, obj.w, obj.h);
        }

        function update() {
            if (gameOver) return;
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            if (keys.left) player.x -= 5;
            if (keys.right) player.x += 5;
            if (keys.jump && player.grounded) {
                player.vy = -15;
                player.grounded = false;
            }

            player.y += player.vy;
            player.vy += gravity;
            if (player.y >= 350) {
                player.y = 350;
                player.vy = 0;
                player.grounded = true;
            }

            // Dog fart logic
            dog.fartTimer--;
            if (dog.fartTimer <= 0) {
                farts.push({ x: dog.x, y: dog.y, w: 30, h: 30, vx: -3 });
                dog.fartTimer = 90 + Math.random() * 60;
            }

            // Update and draw fart clouds
            for (let i = farts.length - 1; i >= 0; i--) {
                farts[i].x += farts[i].vx;
                drawRect(farts[i], "green");
                // Collision check
                if (
                    farts[i].x < player.x + player.w &&
                    farts[i].x + farts[i].w > player.x &&
                    farts[i].y < player.y + player.h &&
                    farts[i].y + farts[i].h > player.y
                ) {
                    gameOver = true;
                    alert("Pepper, you STINK!!");
                }
                if (farts[i].x + farts[i].w < 0) farts.splice(i, 1);
            }

            drawRect(player, "pink");
            drawRect(dog, "brown");

            requestAnimationFrame(update);
        }

        update();
    </script>
</body>
</html>
